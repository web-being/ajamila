(function (g, f) {if ("object" == typeof exports && "object" == typeof module) {module.exports = f();} else if ("function" == typeof define && define.amd) {define("sprae", [], f);} else if ("object" == typeof exports) {exports["sprae"] = f();} else {g["sprae"] = f();}}(typeof self !== 'undefined' ? self : typeof globalThis !== 'undefined' ? globalThis : this, () => {var exports = {};var module = { exports };
var tt=Object.defineProperty;var Ut=Object.getOwnPropertyDescriptor;var Yt=Object.getOwnPropertyNames;var vt=Object.prototype.hasOwnProperty;var y=(t,r)=>()=>(t&&(r=t(t=0)),r);var _t=(t,r)=>{for(var e in r)tt(t,e,{get:r[e],enumerable:!0})},te=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Yt(r))!vt.call(t,o)&&o!==e&&tt(t,o,{get:()=>r[o],enumerable:!(n=Ut(r,o))||n.enumerable});return t};var ee=t=>te(tt({},"__esModule",{value:!0}),t);var H,l,Z,R,et,$,C,F,rt,z,J,X,dt,mt,re,G,ot,yt,ht,L,V,pt,oe,Q,N,b,bt,S,nt,W,gt,p,h=y(()=>{U();U();H=Symbol.dispose||(Symbol.dispose=Symbol("dispose")),l=Symbol("state"),Z=Symbol("on"),R=Symbol("off"),et=Symbol("add"),$=":",z=t=>t(),J=z,X={},dt={},mt=(t=document.body,r)=>{if(t[l])return Object.assign(t[l],r);r=D(r||{});let e=[],n=[],o,i=()=>!n&&(n=e.map(a=>a())),s=()=>(n?.map(a=>a()),n=null);t[Z]=i,t[R]=s,t[H]||(t[H]=()=>(t[R](),t[R]=t[Z]=t[H]=t[l]=t[et]=null));let c=(a,f=a.attributes)=>{if(f)for(let d=0;d<f.length;){let{name:u,value:m}=f[d];if(u.startsWith($)){if(a.removeAttribute(u),e.push(o=re(a,u,m,r)),n.push(o()),l in a)return}else d++}for(let d of[...a.childNodes])d.nodeType==1&&c(d)};return t[et]=c,c(t),t[l]===void 0&&(t[l]=r),r},re=(t,r,e,n)=>{let o,i,s=r.slice($.length).split("..").map((c,a,{length:f})=>c.split($).reduce((d,u)=>{let[m,...x]=u.split("."),q=ht(m,e,X[m]?.clean);if(m.startsWith("on")){let P=m.slice(2),ft=E=>b(q(n),E),I=pt(Object.assign(f==1?ft:E=>(o=(a?o:ft)(E),i(),i=s[(a+1)%f]()),{target:t,type:P}),x);return E=>(E=d?.(),I.target.addEventListener(P,I,I),()=>(E?.(),I.target.removeEventListener(P,I)))}let j=(X[m]||X["*"])(t,n,e,m);if(!x.length&&!d)return()=>j&&F(()=>j(q(n)));let g,M=C(-1),A=-1,B=W(pt(()=>{++M.value||(g=F(()=>j&&(M.value==A?B():(A=M.value,j(q(n))))))},x));return P=>(P=d?.(),B(),{[m]:()=>(P?.(),g(),M.value=-1,A=g=null)}[m])},null));return()=>i=s[0]()},G=t=>(t.directive&&(X=t.directive),t.modifier&&(dt=t.modifier),t.compile&&(yt=t.compile),t.prefix&&($=t.prefix),t.signal&&(C=t.signal),t.effect&&(F=t.effect),t.computed&&(rt=t.computed),t.batch&&(z=t.batch),t.untracked&&(J=t.untracked)),ot=(t=document.body,r)=>{let e=D(r);return mt(t,e),new MutationObserver(o=>{for(let i of o)for(let s of i.addedNodes)if(s.nodeType===1&&s[l]===void 0){for(let c of s.attributes)if(c.name.startsWith($)){t[et](s);break}}}).observe(t,{childList:!0,subtree:!0}),e},ht=(t,r,e=V,n)=>{if(n=L[r=e(r)])return n;try{n=yt(r)}catch(o){console.error(`\u2234 ${o}

${$+t}="${r}"`)}return L[r]=o=>{try{return n?.(o)}catch(i){console.error(`\u2234 ${i}

${$+t}="${r}"`)}}},L={},V=t=>t.trim(),pt=(t,r)=>{for(;r.length;){let[e,...n]=r.pop().split("-");t=oe(dt[e]?.(t,...n)??t,t)}return t},oe=(t,r)=>{if(t!=r)for(let e in r)t[e]??(t[e]=r[e]);return t},Q=(t,r,e=ht(t,`${r}=__`))=>(n,o)=>{n.__=o,e(n),delete n.__},N=t=>{if(!t.nodeType)return t;let r=t.content.cloneNode(!0),e=[...t.attributes],n=document.createTextNode(""),o=(r.append(n),[...r.childNodes]);return{childNodes:o,content:r,remove:()=>r.append(...o),replaceWith(i){i!==n&&(n.before(i),r.append(...o))},attributes:e,removeAttribute(i){e.splice(e.findIndex(s=>s.name===i),1)}}},b=(t,r)=>typeof t=="function"?t(r):t,bt=t=>t.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(r,e)=>(e?"-":"")+r.toLowerCase()),S=(t,r,e)=>e==null||e===!1?t.removeAttribute(r):t.setAttribute(r,e===!0?"":e),nt=(t,r=[])=>t?typeof t=="string"?t:(Array.isArray(t)?t.map(nt):Object.entries(t).reduce((e,[n,o])=>o?[...e,n]:e,[])).join(" "):"",W=(t,r=queueMicrotask)=>{let e=0,n=o=>{e++||(t(o),r((i=e>1)=>(e=0,i&&n(o))))};return n},gt=(t,r=queueMicrotask,e=0)=>(n,o=++e)=>r(()=>o==e&&t(n)),p=mt});var O,k,it,w,ne,Y,xt,D,U=y(()=>{h();O=Symbol("signals"),k=Symbol("change"),it=Symbol("set"),w=(t,r=globalThis)=>{if(!t||t[Symbol.toStringTag]||t[O])return t;if(t.constructor!==Object)return Array.isArray(t)?ne(t):t;let e=Object.keys(t).length,n={},o=new Proxy(Object.assign(n,{[k]:C(e),[O]:n}),{get:(s,c)=>c in n?n[c]?n[c].valueOf():n[c]:r[c],set:(s,c,a,f)=>(c in n?xt(n,c,a):(Y(n,c,a),n[k].value=++e),1),deleteProperty:(s,c)=>(c in n&&(c[0]!="_"&&n[c]?.[Symbol.dispose]?.(),delete n[c],n[k].value=--e),1),ownKeys:()=>(n[k].value,Reflect.ownKeys(n)),has:s=>1}),i=Object.getOwnPropertyDescriptors(t);for(let s in t)i[s]?.get?(n[s]=rt(i[s].get.bind(o)))[it]=i[s].set?.bind(o):Y(n,s,t[s]);return o},ne=(t,r=globalThis)=>{let e=Array(t.length).fill(null),n=!1,o=c=>function(){return n=!0,c.apply(this,arguments)},i=C(t.length),s=new Proxy(Object.assign(e,{[k]:i,[O]:e,push:o(e.push),pop:o(e.pop),shift:o(e.shift),unshift:o(e.unshift),splice:o(e.splice)}),{get(c,a){return a==="length"?n?(n=!1,e.length):i.value:typeof a=="symbol"||isNaN(a)?e[a]?.valueOf()??r[a]:(e[a]??(e[a]=C(w(t[a])))).valueOf()},set(c,a,f){if(a==="length"){for(let d=f;d<e.length;d++)delete s[d];i.value=e.length=f}else a>=e.length?(Y(e,a,f),s.length=+a+1):e[a]?xt(e,a,f):Y(e,a,f);return 1},deleteProperty:(c,a)=>(e[a]?.[Symbol.dispose]?.(),delete e[a],1)});return s},Y=(t,r,e)=>t[r]=r[0]=="_"||e?.peek?e:C(w(e)),xt=(t,r,e,n,o)=>r[0]==="_"?t[r]=e:e!==(o=(n=t[r]).peek())&&(n[it]?n[it](e):Array.isArray(e)&&Array.isArray(o)?k in o?J(()=>z(()=>{for(let i=0;i<e.length;i++)o[i]=e[i];o.length=e.length})):n.value=e:n.value=w(e)),D=w});var T,St,K,v,_,st,at,ct,At=y(()=>{St=0,v=(t,r,e=new Set,n=()=>r.value)=>r={get value(){return T?.deps.push(e.add(T)),t},set value(o){if(o!==t){t=o;for(let i of e)K?K.add(i):i()}},peek(){return t},toJSON:n,then:n,toString:n,valueOf:n},_=(t,r,e,n,o)=>(e=i=>{if(o=r,r=null,o?.call?.(),i=T,T=e,St++>10)throw"Cycle detected";try{r=t()}finally{T=i,St--}},n=e.deps=[],e(),i=>{for(r?.call?.();i=n.pop();)i.delete(e)}),st=(t,r=v(),e,n,o=()=>e.value)=>e={get value(){return n||(n=_(()=>r.value=t())),r.value},peek:r.peek,toJSON:o,then:o,toString:o,valueOf:o},at=(t,r=!K)=>{K??(K=new Set);try{t()}finally{if(r){for(let e of K)e();K=null}}},ct=(t,r,e)=>(r=T,T=null,e=t(),T=r,e)});var kt,Ot=y(()=>{h();kt=(t,r,e,n,o)=>{var i;return t._holder?p(n=t,r):(t[i=l]??(t[i]=null),n=t.content?N(t):t,t.replaceWith(e=document.createTextNode("")),n._holder=e._holder=e,e._clauses=[n._clause=[n,!1]],e.update=W(()=>{let s=e._clauses.find(([,c])=>c);s!=o&&(o?.[0].remove(),o?.[0][R]?.(),(o=s)&&(e.before(o[0].content||o[0]),o[0][l]?o[0][Z]?.():(delete o[0][l],p(o[0],r))))})),s=>{n._clause[1]=s,n._holder.update()}}});var Nt,wt=y(()=>{h();Nt=(t,r,e,n,o=t)=>{for(e=t.content?N(t):t;o&&!(e._holder=o._holder);)o=o.previousSibling;return t.remove(),t[l]=null,e._holder._clauses.push(e._clause=[e,!0]),()=>{e._holder.update()}}});var Tt,jt=y(()=>{h();Tt=t=>(t.content&&t.replaceWith(t=N(t).childNodes[0]),r=>(r=b(r,t.textContent),t.textContent=r??""))});var $t,Ct=y(()=>{h();$t=(t,r,e)=>(r=new Set,n=>{e=new Set,n&&nt(b(n,t.className)).split(" ").map(o=>o&&e.add(o));for(let o of r)e.has(o)?e.delete(o):t.classList.remove(o);for(let o of r=e)t.classList.add(o)})});var Wt,qt=y(()=>{h();Wt=(t,r)=>(r=t.getAttribute("style"),e=>{if(e=b(e,t.style),typeof e=="string")S(t,"style",r+"; "+e);else{r&&S(t,"style",r);for(let n in e)n[0]=="-"?t.style.setProperty(n,e[n]):n[0]>"A"&&(t.style[n]=e[n])}})});var Mt,Pt=y(()=>{h();Mt=()=>t=>b(t)});var Et,Lt=y(()=>{h();Et=(t,r,e,n)=>{try{let o=Q(n,e),i=t.type==="checkbox"?()=>o(r,t.checked):t.type==="select-multiple"?()=>o(r,[...t.selectedOptions].map(s=>s.value)):()=>o(r,t.selectedIndex<0?null:t.value);t.oninput=t.onchange=i,t.type?.startsWith("select")&&(new MutationObserver(i).observe(t,{childList:!0,subtree:!0,attributes:!0}),p(t,r)),L[V(e)](r)??i()}catch{}return t.type==="text"||t.type===""?o=>t.setAttribute("value",t.value=o??""):t.tagName==="TEXTAREA"||t.type==="text"||t.type===""?(o,i,s)=>(i=t.selectionStart,s=t.selectionEnd,t.setAttribute("value",t.value=o??""),i&&t.setSelectionRange(i,s)):t.type==="checkbox"?o=>(t.checked=o,S(t,"checked",o)):t.type==="radio"?o=>t.value===o&&(t.checked=o,S(t,"checked",o)):t.type==="select-one"?o=>{for(let i of t.options)i.value==o?i.setAttribute("selected",""):i.removeAttribute("selected");t.value=o}:t.type==="select-multiple"?o=>{for(let i of t.options)i.removeAttribute("selected");for(let i of o)t.querySelector(`[value="${i}"]`).setAttribute("selected","")}:o=>t.value=o}});var Dt,Kt=y(()=>{h();Dt=(t,r,e,n,o,i)=>typeof L[V(e)](r)=="function"?s=>s(t):Q(n,e)(r,t)});var It,Rt=y(()=>{h();It=(t,r,e)=>(t[l]=null,e=w({},r),n=>{let o=b(n,e);for(let i in o)e[i]=typeof o[i]=="function"?o[i].bind(e):o[i];return t[l]??(delete t[l],J(()=>p(t,e)))})});var Ft,Jt,Vt=y(()=>{h();Ft=(t,r,e)=>{let[n,o="$"]=e.split(/\bin\b/)[0].trim().replace(/\(|\)/g,"").split(/\s*,\s*/),i=document.createTextNode(""),s,c,a,f=0,d=W(()=>{var q,j;let u=0,m=a,x=m.length;if(s&&!s[k]){for(let g of s[O]||[])g[Symbol.dispose]();s=null,f=0}if(x<f)s.length=x;else{if(!s)s=m;else for(;u<f;)s[u]=m[u++];for(;u<x;u++){s[u]=m[u];let g=u,M=w({[n]:s[O]?.[g]?.peek?s[O]?.[g]:s[g],[o]:c?c[g]:g},r),A=t.content?N(t):t.cloneNode(!0);i.before(A.content||A),p(A,M);let B=((j=s[q=O]||(s[q]=[]))[u]||(j[u]={}))[Symbol.dispose];s[O][u][Symbol.dispose]=()=>{B?.(),A[Symbol.dispose]?.(),A.remove()}}}f=x});return t.replaceWith(i),t[l]=null,u=>(c=null,typeof u=="number"?a=Array.from({length:u},(m,x)=>x+1):u?.constructor===Object?(c=Object.keys(u),a=Object.values(u)):a=u||[],F(()=>{a[k]?.value,d()}))};Ft.clean=t=>t.split(/\bin\b/)[1].trim();Jt=Ft});var Bt,Ht=y(()=>{h();Bt=(t,r,e,n)=>o=>S(t,n,b(o,t.getAttribute(n)))});var Xt,Zt=y(()=>{h();Xt=t=>r=>{for(let e in r)S(t,bt(e),r[e])}});var Gt={};_t(Gt,{batch:()=>at,computed:()=>st,default:()=>ie,effect:()=>_,signal:()=>v,sprae:()=>p,start:()=>ot,store:()=>D,untracked:()=>ct,use:()=>G});var zt,lt,ut,ie,Qt=y(()=>{U();At();h();Ot();wt();jt();Ct();qt();Pt();Lt();Kt();Rt();Vt();Ht();Zt();zt={"*":Bt,"":Xt,class:$t,text:Tt,style:Wt,fx:Mt,value:Et,ref:Dt,scope:It,if:kt,else:Nt,each:Jt},lt={debounce:(t,r=250,e=r==="tick"?queueMicrotask:r==="raf"?requestAnimationFrame:r==="idle"?requestIdleCallback:o=>setTimeout(o,r),n=0)=>gt(t,e),throttle:(t,r=250,e=r==="tick"?queueMicrotask:r==="raf"?requestAnimationFrame:n=>setTimeout(n,r))=>W(t,e),once:(t,r,e)=>Object.assign(n=>!r&&(r=1,t(n)),{once:!0}),prevent:t=>r=>(r?.preventDefault(),t(r)),stop:t=>r=>(r?.stopPropagation(),t(r)),immediate:t=>r=>(r?.stopImmediatePropagation(),t(r)),passive:t=>(t.passive=!0,t),capture:t=>(t.capture=!0,t),window:t=>(t.target=window,t),document:t=>(t.target=document,t),parent:t=>(t.target=t.target.parentNode,t),self:t=>r=>r.target===t.target&&t(r),outside:t=>(r,e)=>(e=t.target,!e.contains(r.target)&&r.target.isConnected&&(e.offsetWidth||e.offsetHeight))},ut={ctrl:t=>t.ctrlKey||t.key==="Control"||t.key==="Ctrl",shift:t=>t.shiftKey||t.key==="Shift",alt:t=>t.altKey||t.key==="Alt",meta:t=>t.metaKey||t.key==="Meta"||t.key==="Command",arrow:t=>t.key.startsWith("Arrow"),enter:t=>t.key==="Enter",esc:t=>t.key.startsWith("Esc"),tab:t=>t.key==="Tab",space:t=>t.key==="\xA0"||t.key==="Space"||t.key===" ",delete:t=>t.key==="Delete"||t.key==="Backspace",digit:t=>/^\d$/.test(t.key),letter:t=>/^\p{L}$/gu.test(t.key),char:t=>/^\S$/.test(t.key)};for(let t in ut)lt[t]=(r,...e)=>n=>ut[t](n)&&e.every(o=>ut[o]?.(n)??n.key===o)&&r(n);G({directive:zt,modifier:lt,compile:t=>p.constructor(`with (arguments[0]) { return ${t} };`),signal:v,effect:_,computed:st,batch:at,untracked:ct});p.use=G;p.store=D;p.dir=zt;p.mod=lt;p.start=ot;ie=p});var{default:se,use:ae,start:ce}=(Qt(),ee(Gt));module.exports=se;ae({prefix:document.currentScript.getAttribute("prefix")||document.currentScript.dataset.spraePrefix||":"});ce();
;if (typeof module.exports == "object" && typeof exports == "object") {
  var __cp = (to, from, except, desc) => {
    if ((from && typeof from === "object") || typeof from === "function") {
      for (let key of Object.getOwnPropertyNames(from)) {
        if (!Object.prototype.hasOwnProperty.call(to, key) && key !== except)
        Object.defineProperty(to, key, {
          get: () => from[key],
          enumerable: !(desc = Object.getOwnPropertyDescriptor(from, key)) || desc.enumerable,
        });
      }
    }
    return to;
  };
  module.exports = __cp(module.exports, exports);
}
return module.exports;
}))
